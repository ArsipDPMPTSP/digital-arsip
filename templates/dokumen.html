{% extends "base.html" %} {% block content %}
<h2 class="mb-4">📄 Manajemen Dokumen</h2>

<!-- 🔍 Pencarian -->
<div class="d-flex justify-content-between mb-2">
  <form method="GET" action="{{ url_for('dokumen') }}" class="d-flex" style="max-width: 300px">
    <input type="text" name="search" value="{{ search or '' }}" placeholder="🔍 Cari dokumen..." class="form-control form-control-sm me-2" />
    <button class="btn btn-sm btn-outline-secondary">Cari</button>
  </form>

  <!-- Tombol Tambah -->
  <a href="{{ url_for('form_tambah_dokumen') }}" class="btn btn-primary btn-sm">+ Tambah Dokumen</a>
</div>

<!-- 📄 Daftar Dokumen -->
<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>No</th>
        <th>Nama Pemilik</th>
        <th>Nama Perusahaan</th>
        <th>Nomor Surat</th>
        <th>Tahun</th>
        <th>Alamat</th>
        <th>Kategori</th>
        <th>Jenis</th>
        <th>Tanggal Upload</th>
        <th>File</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      {% for d in dokumen %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ d.nama_pemilik }}</td>
        <td>{{ d.nama_perusahaan }}</td>
        <td>{{ d.nomor_surat }}</td>
        <td>{{ d.tahun }}</td>
        <td>{{ d.alamat }}</td>
        <td>{{ d.kategori or "-" }}</td>
        <td>{{ d.jenis or "-" }}</td>
        <td>{{ d.tgl_upload.strftime('%d-%m-%Y %H:%M') if d.tgl_upload else "-" }}</td>
        <td>
          {% if d.file_url %}
          <a href="{{ d.file_url }}" target="_blank" class="btn btn-sm btn-primary">👁 Lihat</a>
          <a href="{{ d.file_url }}" download class="btn btn-sm btn-success">⬇️ Unduh</a>
          {% else %}
          <span class="text-muted">Tidak ada file</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('edit_dokumen', id=d.id) }}" class="btn btn-sm btn-warning">✏️ Edit</a>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="11" class="text-center text-muted">Belum ada dokumen</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
